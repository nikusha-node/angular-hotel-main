<header class="header" [class.scrolled]="isScrolled">
    <div class="header_logo">
        <h2 (click)="goToHome()">StepHotel</h2>
    </div>

    <nav class="header_nav">
        <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">Home</a>
        <a routerLink="/rooms" routerLinkActive="active">Rooms</a>
        <a routerLink="/hotels" routerLinkActive="active">Hotels</a>
        <a routerLink="/bookedrooms" routerLinkActive="active">Booked Rooms</a>
    </nav>

    <div class="header_actions">
        @if (!authService.isAuthenticated()) {
            <a routerLink="/login" routerLinkActive="active">Login</a>
            <a routerLink="/register" routerLinkActive="active">Register</a>
        } @else {
            <div class="user-menu">
                <a routerLink="/profile" class="user-avatar-link">
                    @if (authService.getUser()?.avatar) {
                        <img [src]="authService.getUser().avatar" [alt]="authService.getUser().firstName" class="user-avatar" />
                    } @else {
                        <div class="default-avatar">{{ getUserInitials() }}</div>
                    }
                </a>
                <div class="user-dropdown">
                    <a routerLink="/profile">My Profile</a>
                    <a (click)="logout()">Logout</a>
                </div>
            </div>
        }
    </div>


    <button class="burger-menu" (click)="toggleMenu()" [class.active]="isMenuOpen">
        <span></span>
        <span></span>
        <span></span>
    </button>


    <div class="mobile-menu" [class.active]="isMenuOpen">
        <nav class="mobile-nav">
            <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }" (click)="closeMenu()">Home</a>
            <a routerLink="/rooms" routerLinkActive="active" (click)="closeMenu()">Rooms</a>
            <a routerLink="/hotels" routerLinkActive="active" (click)="closeMenu()">Hotels</a>
            <a routerLink="/bookedrooms" routerLinkActive="active" (click)="closeMenu()">Booked Rooms</a>
        </nav>

        <div class="mobile-actions">
            @if (!authService.isAuthenticated()) {
                <a routerLink="/login" routerLinkActive="active">Login</a>
                <a routerLink="/register" routerLinkActive="active" (click)="closeMenu()">Register</a>
            } @else {
                <a routerLink="/profile" routerLinkActive="active" (click)="closeMenu()">
                    @if (authService.getUser()?.avatar) {
                        <img [src]="authService.getUser().avatar" [alt]="authService.getUser().firstName" class="user-avatar" />
                    } @else {
                        <div class="default-avatar">{{ getUserInitials() }}</div>
                    }
                </a>
                <a (click)="logout(); closeMenu()">Logout</a>
            }
        </div>
    </div>
</header>